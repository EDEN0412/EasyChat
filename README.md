## アプリケーション名
EasyChat

## アプリケーション概要
EasyChatは、シンプルで使いやすいチャットアプリケーションです。複雑な機能を省き、必要最小限の機能に特化することで、誰でも直感的に使えるコミュニケーションツールです。

### 想定される利用シーン
- 小規模チームの日常的なコミュニケーション
- 家族や友人グループでの気軽な会話
- IT初心者向けの社内チャットツール
- 高齢者コミュニティでの交流

### 他のチャットアプリとの違い
- 必要最小限の機能に絞った直感的な操作性
- 登録からチャット開始までの手順が簡単
- 軽量で高速な動作
- シンプルで見やすいUI/UX

## URL
https://easychat-frub.onrender.com

## テスト用アカウント
・Basic認証ID: admin
・Basic認証パスワード: 2222
・ユーザー名: test
・パスワード: sample

## 利用方法
1. アカウント作成
   - ユーザー名とパスワードで簡単に登録
   - メールアドレスは不要

2. チャンネルの利用
   - 既存のチャンネルに参加
   - 新しいチャンネルの作成
   - 自分のチャンネルの編集
   - 自分のチャンネルの削除
   - チャンネル一覧から簡単に選択

3. メッセージの送信
   - テキストメッセージの送信
   - 絵文字リアクションの追加
   - @マークでメンション

4. メッセージの管理
   - 自分のメッセージの編集
   - 自分のメッセージの削除
   - 過去のメッセージの閲覧

5. ダークモードの切替
   - 画面右上の切替ボタンをクリック
   - システム設定に連動した自動切替にも対応
   - 長時間の利用でも目に優しい表示

## アプリケーションを作成した背景
近年、リモートワークやオンラインコミュニケーションの需要が高まっていますが、既存のチャットツールには以下のような課題があります：

1. 機能が多すぎて操作が複雑
2. 高齢者や IT に不慣れな方には使いづらい
3. 必要のない機能が多く、システムが重い
4. 初期設定や運用が複雑

これらの課題を解決するため、以下のようなユーザーに焦点を当てたアプリケーションを開発しました：

- IT初心者の方々
- シンプルな機能のみを求めるユーザー
- 小規模チームやコミュニティ
- 高齢者や技術に不慣れな方々

## 要件定義

### 機能要件

1. **ユーザー管理**
   - ユーザー登録（メールアドレス不要のシンプルな登録フロー）
   - ユーザーログイン（ユーザー名とパスワードのみ）
   - ユーザーログアウト
   - セッション維持によるログイン状態の記憶

2. **チャンネル管理**
   - チャンネル作成（誰でも作成可能）
   - チャンネル一覧表示（サイドバーに常時表示）
   - チャンネル名編集（作成者のみ権限あり）
   - チャンネル削除（作成者のみ権限あり）
   - モーダルウィンドウでの操作性向上

3. **メッセージング**
   - テキストメッセージの送信
   - メッセージのリアルタイム表示（WebSocket通信）
   - メッセージ編集（投稿者のみ編集可能）
   - メッセージ削除（投稿者のみ削除可能）
   - 固定表示入力フォーム（モバイル対応）
   - @メンションによるユーザー指定

4. **リアクション**
   - メッセージへの絵文字リアクション追加
   - 自分のリアクションの削除
   - リアクションのリアルタイム更新（他ユーザーの操作も即時反映）

5. **モバイル対応UI**
   - レスポンシブデザイン（767px/1024pxブレークポイント）
   - ハンバーガーメニュー（モバイル表示時のナビゲーション）
   - サイドバー表示・非表示切替
   - モバイル向け最適化入力フォーム
   - タッチ操作の最適化

6. **テーマ設定**
   - ダークモード・ライトモード切替
   - システム設定との連動
   - ユーザー設定の記憶

### 非機能要件
1. **パフォーマンス**：低レイテンシー、快適な動作速度
2. **セキュリティ**：パスワードハッシュ化、セッション管理
3. **ユーザビリティ**：直感的UI、3クリック以内での操作完了

## 実装した機能についての画像やGIFおよびその説明

### 1. ユーザー認証機能
[![Image from Gyazo](https://i.gyazo.com/fe100ecab4d44cb879cad9c0a6eb1c5a.png)](https://gyazo.com/fe100ecab4d44cb879cad9c0a6eb1c5a)
[![Image from Gyazo](https://i.gyazo.com/5d9db1ac678dccbf109ae819759547c6.png)](https://gyazo.com/5d9db1ac678dccbf109ae819759547c6)
- シンプルなログインフォーム
- 直感的なユーザー登録プロセス
- **操作手順**：
  1. ユーザー名とパスワードのみで登録（メールアドレス不要）
  2. 登録後は自動的にログイン状態に
  3. 次回以降はセッションが維持され、ログイン状態が記憶される
- **エラー処理**：
  - 既存ユーザー名での登録時は明確なエラーメッセージを表示
  - パスワード入力ミスの場合は具体的なガイダンスを提供

### 2. チャンネル管理機能
[![Image from Gyazo](https://i.gyazo.com/69587cfceafc7ac16c354f2e5a1b7a5b.png)](https://gyazo.com/69587cfceafc7ac16c354f2e5a1b7a5b)
- チャンネルの作成・編集・削除
- モーダルウィンドウでの快適な操作
- **操作フロー**：
  1. サイドバーの「+」ボタンでチャンネル作成モーダルを表示
  2. チャンネル名を入力して作成
  3. 自分が作成したチャンネルにはチャンネル名横に編集アイコンと削除アイコンが表示され、それぞれクリックすることで編集または削除が可能
- **権限管理**：
  - チャンネル作成者のみが編集・削除可能
  - 一般ユーザーには編集・削除ボタンが表示されない設計

### 3. メッセージング機能
[![Image from Gyazo](https://i.gyazo.com/0a09e92c386191cd6eeab687a1631a11.gif)](https://gyazo.com/0a09e92c386191cd6eeab687a1631a11)
- リアルタイムメッセージ送受信
- 絵文字リアクション機能
- メッセージの編集・削除
- **メンション機能の使用例**：
  [![Image from Gyazo](https://i.gyazo.com/d6f63188cf7600417fd1ca2fc7fcf2cd.gif)](https://gyazo.com/d6f63188cf7600417fd1ca2fc7fcf2cd)
  - 「@」に続けてユーザー名を入力するとメンション可能
  - メンションされたメッセージは強調表示される
- **リアクション操作**：
  [![Image from Gyazo](https://i.gyazo.com/7a901b539f8dd8779e687620870f7ccb.gif)](https://gyazo.com/7a901b539f8dd8779e687620870f7ccb)
  - メッセージにカーソルを合わせると絵文字選択パネルが表示
  - 8種類の絵文字（👍❤️😊😂🎉😮😢👏）から選択可能
  - クリックでリアクションを追加、再クリックで削除
  - 同じリアクションは複数人分がカウント表示される

### 4. レスポンシブデザイン
[![Image from Gyazo](https://i.gyazo.com/e6aa3ca7ba08635e0aa964670759142e.png)](https://gyazo.com/e6aa3ca7ba08635e0aa964670759142e)
[![Image from Gyazo](https://i.gyazo.com/25d529be2510a6798361d9ae34d67466.png)](https://gyazo.com/25d529be2510a6798361d9ae34d67466)
- スマートフォン・タブレット対応
- ハンバーガーメニュー
- モバイルに最適化された入力フォーム
- **モバイル操作フロー**：

  [![Image from Gyazo](https://i.gyazo.com/4cf9f260b53365b51059bbf287af1813.gif)](https://gyazo.com/4cf9f260b53365b51059bbf287af1813)
  1. ハンバーガーメニューをタップしてサイドバーを表示
  2. チャンネル選択後は自動的にサイドバーが閉じる
  3. 画面下部に固定された入力フォームでいつでもメッセージ入力可能
- **タッチ操作の最適化**：
  - タップしやすいボタンサイズ
  - スワイプ操作によるサイドバー表示・非表示

### 5. ダークモード
[![Image from Gyazo](https://i.gyazo.com/cbbfc3592f28f86170a0f4e7f053561e.gif)](https://gyazo.com/cbbfc3592f28f86170a0f4e7f053561e)
- ユーザーの好みに応じて切り替え可能
- 目の疲れを軽減
- システム設定との連動
- **設定保存機能**：
  - ユーザーの設定はブラウザに保存され、次回訪問時も維持
  - システム設定（OS）に連動させるオプションも選択可能

### 6. エラー処理とフィードバック
[![Image from Gyazo](https://i.gyazo.com/cfda81309f6f87670425b4962ec5eda9.gif)](https://gyazo.com/cfda81309f6f87670425b4962ec5eda9)
- **ユーザーフレンドリーなエラーメッセージ**：
  - 技術的な詳細ではなく、次にとるべき行動を提示
  - 視覚的にわかりやすいデザイン
- **成功フィードバック**：
  - アクション完了時は控えめな通知で確認
  - 操作の成功を直感的に理解できるアニメーション

### 7. 画像共有機能
[![Image from Gyazo](https://i.gyazo.com/847a81e75c0bc1f12ada1ddc4e3806d9.gif)](https://gyazo.com/847a81e75c0bc1f12ada1ddc4e3806d9)
- シンプルな画像アップロード
- サムネイル表示とフルサイズ閲覧
- **操作手順**：
  1. メッセージ入力欄の横にある画像アイコンをクリック
  2. 画像を選択してアップロード
  3. チャット上でサムネイルとして表示
  4. 画像をクリックするとフルサイズで表示

### 8. メッセージ検索機能
[![Image from Gyazo](https://i.gyazo.com/ee1c59f54c6c6be61c6d1ce6f3b41fc4.gif)](https://gyazo.com/ee1c59f54c6c6be61c6d1ce6f3b41fc4)
- キーワードによる会話履歴の検索
- 検索結果のハイライト表示
- **操作方法**：
  1. 上部検索バーにキーワードを入力
  2. エンターキーで検索実行
  3. 該当するメッセージが時系列順に表示

### 9. チャンネル検索機能
[![Image from Gyazo](https://i.gyazo.com/8392785069b236135bb720111c98ac36.gif)](https://gyazo.com/8392785069b236135bb720111c98ac36)
- チャンネル名での簡単検索
- チャンネル一覧が多い場合に便利
- **使用例**：
  1. サイドバー上部の検索欄にチャンネル名を入力
  2. 入力に応じてリアルタイムでフィルタリング
  3. 該当するチャンネルのみが表示される

### 10. ユーザープロフィール機能
[![Image from Gyazo](https://i.gyazo.com/141a2d33bf9ba2723ef6c8fe7eea2789.gif)](https://gyazo.com/141a2d33bf9ba2723ef6c8fe7eea2789)
- カスタマイズ可能なアバター
- **アバター設定オプション**：
  1. 背景色：9色から選択可能（ブルー、レッド、グリーン、イエロー、パープル、ティール、オレンジ、グレー、ブラック）
  2. テキスト色：7色から選択可能（ホワイト、ブラック、ライトイエロー、ライトグリーン、ライトレッド、ライトブルー、ライトパープル）
  3. 丸形アイコン内に表示される名前の頭文字
- **ステータスメッセージ機能**：
  1. 最大255文字のカスタムステータスメッセージを設定可能
  2. 絵文字も使用可能
- **使用例**：
  - ブルー背景にホワイト文字で「T」を表示、ステータス「会議中🔇」
  - レッド背景にブラック文字で「S」を表示、ステータス「質問歓迎です！」

## 今後の実装予定機能
・リアルタイム通知機能
  - 新着メッセージをフラッシュメッセージ（ポップアップ通知）で表示

・お気に入りチャンネル機能
  - よく使うチャンネルをお気に入りとしてピン留め
  - サイドバー上部に固定表示されるため素早くアクセス可能
  - シンプルな星マークアイコンでお気に入り登録/解除

・簡易ファイル共有機能
  - PDFや文書ファイルなどのアップロードが可能
  - サムネイル表示とクリックでのプレビュー

・ユーザープロフィール画像機能
  - プロフィールにカスタム画像を設定可能
  - アップロード・トリミング機能付き

・設定機能
  - 画面右上のプロフィールアイコンから設定ページにアクセス
  - 表示設定（文字サイズ）

## データベース設計
[![Image from Gyazo](https://i.gyazo.com/d42f995872bd2db01522efbb6df1fbe9.png)](https://gyazo.com/d42f995872bd2db01522efbb6df1fbe9)

## 画面遷移図	
[![Image from Gyazo](https://i.gyazo.com/29d1dcd78b5748b92a40184ab09cf0db.png)](https://gyazo.com/29d1dcd78b5748b92a40184ab09cf0db)

## 開発環境
- バックエンド
  - Flask（Webアプリケーションフレームワーク）
  - python-socketio（リアルタイムチャット用WebSocket通信）
  - SQLAlchemy（MySQLとの連携用ORMツール）
- フロントエンド
  - HTML/CSS
  - JavaScript（クライアントサイド）
  - Jinja2テンプレートエンジン
- データストア
  - 開発環境：MySQL 8.0
    - ユーザー情報、チャンネル、メッセージの管理
    - リアクションやメンション情報の保存
    - 効率的なデータ検索とリレーション管理
  - 本番環境：PostgreSQL（Render）
    - 同一のスキーマ構造でクラウド環境に最適化
    - SQLAlchemyによるデータベース切替の自動化
- 開発ツール
  - MySQL Sequel Ace（データベース管理ツール）
    - データベースの構造管理
    - クエリのテストと実行
    - データの可視化と編集

## ローカルでの動作方法

### 前提条件
- Python 3.8以上
- MySQL 8.0以上
- Git

### セットアップ手順
1. リポジトリのクローン
   ```bash
   git clone https://github.com/Eden0412/easychat.git
   cd easychat
   ```

2. データベースのセットアップ
   ```bash
   mysql
   ```
   MySQLプロンプトで以下を実行：
   ```sql
   CREATE DATABASE chatapp;
   CREATE USER 'chatapp_user'@'localhost' IDENTIFIED BY '0000';
   GRANT ALL PRIVILEGES ON chatapp.* TO 'chatapp_user'@'localhost';
   FLUSH PRIVILEGES;
   EXIT;
   ```

3. 環境設定
   - `.env.sample`をコピーして`.env`ファイルを作成
   ```bash
   cp .env.sample .env
   ```
   
   必要な環境変数：
   ```
   FLASK_APP=app.py
   FLASK_ENV=development
   SECRET_KEY=2222
   DATABASE_URL=mysql://chatapp_user:0000@localhost/chatapp

   # データベース設定
   MYSQL_HOST=localhost
   MYSQL_USER=chatapp_user
   MYSQL_PASSWORD=0000
   MYSQL_DATABASE=chatapp
   MYSQL_PORT=3306

   # アプリケーション設定
   APP_PORT=5000
   ```

4. 仮想環境の作成と有効化
   ```bash
   python -m venv venv
   source venv/bin/activate
   ```

5. 依存関係のインストール
   ```bash
   # すべての依存関係をインストール
   pip install -r requirements.txt
   ```

6. データベースのマイグレーション
   ```bash
   # 仮想環境を有効化してから実行
   source venv/bin/activate

   # 既存のマイグレーションを適用
   flask db upgrade
   ```

   注意：初回のみ、マイグレーションの初期化が必要な場合は以下を実行
   ```bash
   flask db init
   flask db migrate -m "Initial migration"
   flask db upgrade
   ```

7. アプリケーションの起動
   ```bash
   # 仮想環境を有効化してから実行
   source venv/bin/activate
   
   # アプリケーションの起動
   flask run
   ```

   アプリケーションは http://localhost:5000 で起動します。

注意：
- エラー「No module named '...'」が発生した場合は、上記の依存関係のインストール手順を再確認してください

## 工夫したポイント 

### 開発プロセスの効率化
- 要件定義から実装までの計画的な開発管理で3週間での完成を実現

### 技術選定の最適化
- Flask採用による開発速度向上と軽量アプリの実現
- WebSocketによるリアルタイム通信で低遅延を実現
- SQLAlchemyでデータ整合性確保と開発効率向上

### 技術的課題の克服
- WebSocket接続断線時の自動再接続機能実装によるユーザー体験向上
- モバイル環境での仮想キーボード表示時のレイアウト崩れ防止策の実装

### ユーザー中心設計とUI/UX最適化
- ペルソナ設定に基づく機能選定と使いやすさ重視の設計
- シンプルな操作性と視認性の高いデザイン
- モバイルファーストのレスポンシブ対応
  - タッチ操作の最適化
  - 画面サイズ別の最適表示

### システム性能とセキュリティ
- 効率的なデータベース設計による安定した応答性
- セキュリティ対策（パスワードハッシュ化、XSS対策など）
- エラー処理の最適化（ユーザーフレンドリーなメッセージ設計）

### デプロイと環境管理
- Renderを活用した効率的なデプロイプロセス
- 環境変数による本番・開発環境の切替
- 開発環境(MySQL)と本番環境(PostgreSQL)の統一的管理

## 改善点

### 機能面の拡張
- ユーザープロフィールのさらなる充実
  - 追加のカスタマイズオプション
  - プロフィール情報の表示改善
- 他ユーザーのリアクションもリアルタイムで反映
- リロード不要のメンション機能実装
- チャンネル作成・更新のリアルタイム反映
  - 現状は新しいチャンネルを追加しても他ユーザーには即時反映されない
  - ページのリロードが必要なく自動的に全ユーザーに表示されるよう改善

### UI改善
- 画像アイコンや検索アイコンなどをよりシンプルなデザインに変更
- モバイル版のフラッシュメッセージ表示位置を修正（現在は二行目に表示される問題あり）
- メンション通知のアラート表示に時間制限を設定（現在は消えずに表示され続ける）
- コンテンツの配置をより中央寄せにして視認性を向上
- PC・モバイル両方の画面デザインをシンプルに統一し、使いやすさを向上
- 投稿画像をクリックした時に別タブではなく、同一画面内でモーダル表示する仕組みの実装

### コード品質向上
- モデル定義の統合（重複排除とタイムゾーン処理の一貫化）
- 認証ロジックの集約と簡素化
- 大規模ファイルの機能別分割（特にroutes/chat.pyと長大なテンプレート）
- フロントエンドコードの整理（JavaScriptとCSSの分離と最適化）

### ドキュメント整備
- 詳細なユーザーマニュアルの作成
  - 初心者向けの基本操作ガイド
  - 機能別の使い方説明
  - 画像や動画によるチュートリアル

## 制作時間
総開発期間：**約3週間**